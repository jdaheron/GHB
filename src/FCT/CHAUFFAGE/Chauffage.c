/**************************************************************************************************/
/*																								  */
/* Gestion de l'arrosage																		  */
/*																								  */
/**************************************************************************************************/


/*--------------------------------------------------------------------------------------------------
	INCLUDES
--------------------------------------------------------------------------------------------------*/

#include "Chauffage.h"
#include "Conf.h"


/*--------------------------------------------------------------------------------------------------
	PRIVATE DEFINE
--------------------------------------------------------------------------------------------------*/


/*--------------------------------------------------------------------------------------------------
	PRIVATE TYPEDEF
--------------------------------------------------------------------------------------------------*/


/*--------------------------------------------------------------------------------------------------
	PRIVATE DATA DECLARATION
--------------------------------------------------------------------------------------------------*/

static Chauffage_t This;


/*--------------------------------------------------------------------------------------------------
	FUNCTIONS DEFINITIONS
--------------------------------------------------------------------------------------------------*/


/*------------------------------------------------------------------------------------------------*/
void Chauffage_Init(void)
{
	//------------------------------------------------------
	// Lecture de la configuration
	//------------------------------------------------------
	if (Parametres_Init(&Conf_IniFile) != Status_OK)
	{
		_printf("Conf forced to default value\n");
	}
	Parametres_OpenReadFile(&Conf_IniFile);

	Parametres_Read(&Conf_IniFile,	Conf_CH_SeuilStart_DegC	,	&This.SeuilStart_DegC	);
	Parametres_Read(&Conf_IniFile,	Conf_CH_SeuilStop_DegC	,	&This.SeuilStop_DegC	);
	Parametres_Read(&Conf_IniFile,	Conf_CH_TempoApresCh_s	,	&This.TempoApresCh_s	);

	Parametres_CloseFile(&Conf_IniFile);


	//------------------------------------------------------
	// Affichage de la configuration
	//------------------------------------------------------
	_printf("--- CONF CHAUFFAGE ---\n");
	_printf("SeuilStart_DegC = %d\n"	,	This.SeuilStart_DegC	);
	_printf("SeuilStop_DegC  = %d\n"	,	This.SeuilStop_DegC		);
	_printf("TempoApresCh_s  = %d\n"	,	This.TempoApresCh_s		);
}


/*------------------------------------------------------------------------------------------------*/
void Chauffage_Management(void)
{

}


/*------------------------------------------------------------------------------------------------*/
Chauffage_t* Chauffage_Get(void)
{
	return &This;
}


/*------------------------------------------------------------------------------------------------*/
